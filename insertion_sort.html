<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>
            Insertion sort
        </title>
        <script src="fabric.js"></script>
    </head>
    <body>
        <h1>
            Insertion Sort
        </h1>
        <div class="sliderContainer">
          <label id="delayLbl" for="myDelay">Delay: </label>
          <input id="myDelay" style="width:800px" type="range"
            min=1000 max=10000 step=1000 value=1000
            onchange="updateDelay()"/>
        </div>
        <canvas id="canvas" width="800" height="500" style="border:1px solid #000000"></canvas>
        <script src="common_primitives.js"></script>
        <script src="list_primitives.js"></script>
        <script src="insertion_sort.js"></script>
        <script>
            var canvas = new fabric.Canvas('canvas');
            var list_to_sort = [10, 1, 56, 34, 97, 88, 23, 12, 5];

            async function sort(list_to_sort) {
                await window.insertionSort(list_to_sort);
            }

            function updateDelay() {
              var delay = document.getElementById('myDelay').value;
              delayTime = delay;
              var dispRange =  document.getElementById("delayLbl");
              dispRange.innerHTML = '<p>'
                          + 'Delay: '
                          + '<strong>' + delay + '</strong>'
                          + '</p>';
              // Sets the value to local Storage

              var range = localStorage.getItem("myDelay");
              // i don't think we want to sort again here!
              sort(list_to_sort);
              if (range != undefined && range != delay) {
                localStorage.setItem("myDelay", rangeValue)
                location.reload('/');
              }
            }

            window.onload = function() {
              // Retrieves from local storage
              var range = localStorage.getItem("myDelay");
              if (range != undefined && range!= null) {
                var rangeValue = document.getElementById('myDelay').value = range;
              }
              updateDelay()
            }

        </script>
      </body>
      </br>
      <footer id="footer">
          <script> window.footer() </script>
      </footer>
</html>
